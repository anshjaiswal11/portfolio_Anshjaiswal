{% extends "base.html" %}

{% block title %}Contact - Portfolio{% endblock %}

{% block content %}
<section class="bg-gradient-to-br from-gray-900 to-primary-900 py-24 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <span class="text-primary-300 font-semibold text-sm uppercase tracking-widest">Let's Connect</span>
        <h1 class="text-4xl md:text-5xl font-bold mt-2 mb-4">Get In Touch</h1>
        <p class="text-gray-300 text-lg max-w-2xl mx-auto">Have a project in mind or just want to say hi? I'd love to hear from you!</p>
    </div>
</section>

<section class="py-20">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <!-- Contact Info -->
            <div class="space-y-8">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Let's work together</h2>
                    <p class="text-gray-500 leading-relaxed">Whether you have a project idea, want to collaborate, or just want to chat about technology â€” my inbox is always open. I'll try to get back to you as soon as possible!</p>
                </div>

                <div class="space-y-6">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-envelope text-primary-600"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900">Email</h3>
                            <p class="text-gray-500 text-sm">Send me an email and I'll respond within 24 hours</p>
                            <a href="mailto:contact@portfolio.com" class="text-primary-600 hover:text-primary-700 font-medium text-sm">contact@portfolio.com</a>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0">
                            <i class="fab fa-linkedin-in text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900">LinkedIn</h3>
                            <p class="text-gray-500 text-sm">Connect with me professionally</p>
                            <a href="#" class="text-primary-600 hover:text-primary-700 font-medium text-sm">linkedin.com/in/yourprofile</a>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0">
                            <i class="fab fa-github text-gray-700"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900">GitHub</h3>
                            <p class="text-gray-500 text-sm">Check out my code and open source contributions</p>
                            <a href="#" class="text-primary-600 hover:text-primary-700 font-medium text-sm">github.com/yourusername</a>
                        </div>
                    </div>
                </div>

                <!-- Response time notice -->
                <div class="bg-accent-50 rounded-2xl p-6 border border-accent-100">
                    <div class="flex items-center space-x-3">
                        <div class="w-3 h-3 bg-accent-400 rounded-full animate-pulse"></div>
                        <p class="text-accent-700 font-semibold text-sm">Available for new projects</p>
                    </div>
                    <p class="text-accent-600 text-sm mt-2">I typically respond within 24-48 hours during business days.</p>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="bg-white rounded-2xl p-8 shadow-sm border border-gray-100">
                <h2 class="text-xl font-bold text-gray-900 mb-6">Send a Message</h2>
                <form method="POST" id="contact-form" novalidate class="space-y-5">
                    {{ csrf_input }}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Your Name *</label>
                            {{ form.name }}
                            <p class="error-msg text-red-500 text-xs mt-1 hidden"></p>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address *</label>
                            {{ form.email }}
                            <p class="error-msg text-red-500 text-xs mt-1 hidden"></p>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Subject</label>
                        {{ form.subject }}
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Message *</label>
                        {{ form.message }}
                        <div class="flex justify-between mt-1">
                            <p class="error-msg text-red-500 text-xs hidden"></p>
                            <p class="text-gray-400 text-xs ml-auto"><span id="char-count">0</span> characters</p>
                        </div>
                    </div>
                    <button type="submit" id="submit-btn" class="btn-primary w-full justify-center text-base py-3.5">
                        <i class="fas fa-paper-plane mr-2"></i>
                        <span>Send Message</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
const form = document.getElementById('contact-form');
const messageField = document.querySelector('[name="message"]');
const charCount = document.getElementById('char-count');

// Character counter
messageField.addEventListener('input', () => {
    charCount.textContent = messageField.value.length;
});

// JS Validation
form.addEventListener('submit', function(e) {
    const name = form.querySelector('[name="name"]').value.trim();
    const email = form.querySelector('[name="email"]').value.trim();
    const message = form.querySelector('[name="message"]').value.trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    let valid = true;

    // Clear previous errors
    form.querySelectorAll('.error-msg').forEach(el => { el.textContent = ''; el.classList.add('hidden'); });
    form.querySelectorAll('.form-input').forEach(el => el.classList.remove('border-red-400'));

    if (!name) { showError(form.querySelector('[name="name"]'), 'Name is required'); valid = false; }
    if (!email || !emailRegex.test(email)) { showError(form.querySelector('[name="email"]'), 'Valid email required'); valid = false; }
    if (message.length < 10) { showError(form.querySelector('[name="message"]'), 'Message must be at least 10 characters'); valid = false; }

    if (!valid) { e.preventDefault(); return; }

    const btn = document.getElementById('submit-btn');
    btn.disabled = true;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sending...';
});

function showError(field, msg) {
    field.classList.add('border-red-400');
    const errEl = field.closest('div').querySelector('.error-msg');
    if (errEl) { errEl.textContent = msg; errEl.classList.remove('hidden'); }
}
</script>
{% endblock %}
